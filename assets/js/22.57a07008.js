(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{439:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"å®‰è£…éƒ¨ç½²"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…éƒ¨ç½²"}},[t._v("#")]),t._v(" å®‰è£…éƒ¨ç½²")]),t._v(" "),a("p",[t._v("éƒ¨ç½²æ­¥éª¤ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("å®‰è£…OpenResty")]),t._v(" "),a("li",[t._v("ä¸‹è½½wafçš„luaè„šæœ¬")]),t._v(" "),a("li",[t._v("OpenRestyä¸­å¼•å…¥luaè„šæœ¬")]),t._v(" "),a("li",[t._v("é…ç½®wafè§„åˆ™ï¼š/usr/local/openresty/nginx/conf/waf/rule-config")])]),t._v(" "),a("h3",{attrs:{id:"openrestyå®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#openrestyå®‰è£…"}},[t._v("#")]),t._v(" OpenRestyå®‰è£…")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://openresty.org/en/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenResty"),a("OutboundLink")],1),t._v(" æ˜¯ä¸€ä¸ªåŸºäº "),a("a",{attrs:{href:"https://openresty.org/cn/nginx.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx"),a("OutboundLink")],1),t._v(" ä¸ Lua çš„é«˜æ€§èƒ½ Web å¹³å°ï¼Œå…¶å†…éƒ¨é›†æˆäº†å¤§é‡ç²¾è‰¯çš„ Lua åº“ã€ç¬¬ä¸‰æ–¹æ¨¡å—ä»¥åŠå¤§å¤šæ•°çš„ä¾èµ–é¡¹ã€‚ç”¨äºæ–¹ä¾¿åœ°æ­å»ºèƒ½å¤Ÿå¤„ç†è¶…é«˜å¹¶å‘ã€æ‰©å±•æ€§æé«˜çš„åŠ¨æ€ Web åº”ç”¨ã€Web æœåŠ¡å’ŒåŠ¨æ€ç½‘å…³ã€‚")]),t._v(" "),a("p",[t._v("æ¥æºï¼šhttps://openresty.org/cn/linux-packages.html")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://openresty.org/package/centos/openresty.repo\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" openresty.repo /etc/yum.repos.d/\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" openresty\n")])])]),a("h3",{attrs:{id:"waféƒ¨ç½²"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#waféƒ¨ç½²"}},[t._v("#")]),t._v(" WAFéƒ¨ç½²")]),t._v(" "),a("p",[t._v("ä¸‹è½½wafè„šæœ¬")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://github.com/zhanguangcheng/nginx-lua-waf/archive/refs/heads/master.zip\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unzip")]),t._v(" master.zip\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" ./nginx-lua-waf-master/waf /usr/local/openresty/nginx/conf/\n")])])]),a("p",[t._v("åœ¨OpenRestyé…ç½®æ–‡ä»¶ä¸­å¼•å…¥è„šæœ¬")]),t._v(" "),a("p",[t._v("vim /usr/local/openresty/nginx/conf/nginx.conf")]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("http")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("lua_shared_dict")]),t._v(" limit "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50m")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("lua_package_path")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/local/openresty/nginx/conf/waf/?.lua;;"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("init_by_lua_file")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/local/openresty/nginx/conf/waf/init.lua"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("access_by_lua_file")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/local/openresty/nginx/conf/waf/access.lua"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("header_filter_by_lua_file")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/local/openresty/nginx/conf/waf/header_filter.lua"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å¯åŠ¨")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" /usr/local/openresty/lualib/resty/ /usr/local/openresty/nginx/conf/waf/resty\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ£€æŸ¥é…ç½®è¯­æ³•")]),t._v("\nopenresty "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v("\n\nsystemctl start openresty\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" openresty\n")])])]),a("h2",{attrs:{id:"æµ‹è¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•"}},[t._v("#")]),t._v(" æµ‹è¯•")]),t._v(" "),a("ul",[a("li",[t._v("è®¿é—®éæ³•è·¯å¾„ï¼Œä½¿ç”¨æµè§ˆå™¨è®¿é—®ï¼šhttp://192.168.1.217/.svn/entries")]),t._v(" "),a("li",[t._v("åœ¨urlå‚æ•°ã€POSTå‚æ•°ã€Cookieä¸­åŒ…å«éæ³•å­—ç¬¦ä¸²æ—¶")]),t._v(" "),a("li",[t._v("ä¸Šä¼ æœ¨é©¬æ–‡ä»¶ï¼Œå¦‚xxx.php")]),t._v(" "),a("li",[t._v("è®¿é—®é¢‘ç‡è¿‡å¿«")]),t._v(" "),a("li",[t._v("...")])]),t._v(" "),a("p",[t._v("éƒ½å°†ä¼šè§¦å‘é˜²ç«å¢™ï¼Œæˆ–è€…ç›´æ¥è¿”å›403æ— æƒé™è®¿é—®")]),t._v(" "),a("p",[a("img",{attrs:{src:"/images/e98e427428b3484e80ba44f541bbf2e0.png",alt:"e98e427428b3484e80ba44f541bbf2e0.png"}})]),t._v(" "),a("h2",{attrs:{id:"æ›´å¤š"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ›´å¤š"}},[t._v("#")]),t._v(" æ›´å¤š")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/zhanguangcheng/nginx-lua-waf",target:"_blank",rel:"noopener noreferrer"}},[t._v("zhanguangcheng/nginx-lua-waf"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("ğŸ•‘ æœ€åæ›´æ–°æ—¶é—´: 2022-09-24 23:24")])])])}),[],!1,null,null,null);a.default=n.exports}}]);