(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{437:function(a,e,t){"use strict";t.r(e);var s=t(2),r=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[a._v("#")]),a._v(" 简介")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://ffmpeg.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("FFmpeg"),e("OutboundLink")],1),a._v("（Fast Forward MPEG） 是视频处理最常用的开源软件。它可以用来处理音视频的编解码、格式转换、剪辑、合并、抽取、压缩、解压缩、滤镜、字幕等等。大量用于视频网站和商业软件（比如 Youtube 和 iTunes）\n")]),a._v(" "),e("p",[a._v("官方文档")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://ffmpeg.org/ffmpeg.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("ffmpeg"),e("OutboundLink")],1),a._v(": ffmpeg tool")]),a._v(" "),e("li",[e("a",{attrs:{href:"https://ffmpeg.org/ffmpeg-all.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("ffmpeg-all"),e("OutboundLink")],1),a._v(": ffmpeg tool and FFmpeg components")])]),a._v(" "),e("h2",{attrs:{id:"ffmpeg-工作流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg-工作流程"}},[a._v("#")]),a._v(" FFmpeg 工作流程")]),a._v(" "),e("ol",[e("li",[a._v("读取输入源")]),a._v(" "),e("li",[a._v("进行音视频的解封装")]),a._v(" "),e("li",[a._v("解码每一帧音视频数据")]),a._v(" "),e("li",[a._v("编码每一帧音视频数据")]),a._v(" "),e("li",[a._v("进行音视频的重新封装")]),a._v(" "),e("li",[a._v("输出到目标")])]),a._v(" "),e("h2",{attrs:{id:"ffmpeg-的安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg-的安装"}},[a._v("#")]),a._v(" FFmpeg 的安装")]),a._v(" "),e("p",[a._v("Centos7 ffmpeg的安装")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 依赖准备")]),a._v("\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" gcc gcc-c++\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" openssl openssl-devel\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装yasm，Yasm是一个汇编器")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/local/src\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" http://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxf")]),a._v(" yasm-1.3.0.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" yasm-1.3.0\n./configure\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# mp3支持，lame是目前非常优秀的一种MP3编码引擎")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/local/src\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://nchc.dl.sourceforge.net/project/lame/lame/3.100/lame-3.100.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxf")]),a._v(" lame-3.100.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" lame-3.100\n./configure\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /usr/local/lib/libmp3lame.so.0 /usr/lib64/libmp3lame.so.0\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装ffmpeg")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /usr/local/src\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" http://ffmpeg.org/releases/ffmpeg-4.4.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-zxf")]),a._v(" ffmpeg-4.4.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" ffmpeg-4.4\n./configure "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--prefix")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/ffmpeg --enable-shared --enable-libmp3lame --enable-openssl\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/usr/local/ffmpeg/lib"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" /etc/ld.so.conf\nldconfig\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'export PATH=$PATH:/usr/local/ffmpeg/bin'")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" /etc/profile\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),e("h2",{attrs:{id:"ffmpeg-的使用格式及常用参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg-的使用格式及常用参数"}},[a._v("#")]),a._v(" FFmpeg 的使用格式及常用参数")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ffmpeg [全局参数] {[输入文件参数] -i 输入文件地址} ... {[输出文件参数] 输出文件地址} ...\n")])])]),e("ul",[e("li",[a._v("-hide_banner 隐藏版权声明")]),a._v(" "),e("li",[a._v("-y 覆盖输出文件")]),a._v(" "),e("li",[a._v("-i 输入文件")]),a._v(" "),e("li",[a._v("-f 指定输出文件格式")]),a._v(" "),e("li",[a._v("-c copy 直接拷贝，不经过转码，速度更快")]),a._v(" "),e("li",[a._v("-r 指定帧率，默认1秒截图25次，可使用小数，r=1/多少秒截一张")]),a._v(" "),e("li",[a._v("-an 禁用音频")]),a._v(" "),e("li",[a._v("-vn 禁用视频")]),a._v(" "),e("li",[a._v("-ar 设置音频采样率 96k, 112k, 128k, 160k, 192k, 256k, 320k")]),a._v(" "),e("li",[a._v("-ac 设置音频通道数")]),a._v(" "),e("li",[a._v("-ab | -b:a 设置音频比特率")]),a._v(" "),e("li",[a._v("-c:v：指定视频编码器")]),a._v(" "),e("li",[a._v("-c:a：指定音频编码器")]),a._v(" "),e("li",[a._v("-t：指定转码时长")]),a._v(" "),e("li",[a._v("-ss：指定转码开始时间")]),a._v(" "),e("li",[a._v("-vf video filters，指定简单滤镜，指定宽，高度比例缩放：scale=320:-1")]),a._v(" "),e("li",[a._v("-filter_complex 指定复杂滤镜")])]),a._v(" "),e("h2",{attrs:{id:"ffmpeg-的常见用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg-的常见用法"}},[a._v("#")]),a._v(" FFmpeg 的常见用法")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看文件信息")]),a._v("\nffmpeg "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" null /dev/null\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#提取音频")]),a._v("\nffmpeg "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" mp3 output.mp3\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#提取音频，指定采样率、比特率、通道数")]),a._v("\nffmpeg "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vn")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ar")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("16000")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ac")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b:a")]),a._v(" 8k "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" mp3 output.mp3\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#提取图片关键帧")]),a._v("\nffmpeg "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" image2 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-an")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" output/image%d.jpg\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#从指定时间开始，连续对1秒钟的视频进行截图")]),a._v("\nffmpeg "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" image2 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-an")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ss")]),a._v(" 00:01:24 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" 00:00:01 output/image%d.jpg\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#提取一张图片")]),a._v("\nffmpeg "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" image2 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-an")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vframes")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q:v")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" output.jpg\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#获取分贝（dBFS）信息，现实生活中使用的是dBSPL")]),a._v("\nffmpeg "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-filter_complex")]),a._v(" volumedetect "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c:v")]),a._v(" copy "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" null /dev/null\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#转换视频格式")]),a._v("\nffmpeg "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" copy output.avi\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#改变视频分辨率为480P")]),a._v("\nffmpeg "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vf")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("scale")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("480")]),a._v(":-1 output.mp4\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#多个输出")]),a._v("\nffmpeg "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" input.mp4 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" copy output1.avi "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-vf")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("scale")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("480")]),a._v(":-1 output2.mp4\n")])])]),e("h2",{attrs:{id:"在php中如何调用ffmpeg"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在php中如何调用ffmpeg"}},[a._v("#")]),a._v(" 在PHP中如何调用FFmpeg")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/zhanguangcheng/ffmpeg-php",target:"_blank",rel:"noopener noreferrer"}},[a._v("ffmpeg-php"),e("OutboundLink")],1),a._v("是一个在PHP中调用ffmpeg的简单实现库，有以下几个方法：")]),a._v(" "),e("ul",[e("li",[a._v("input() 指定输入文件")]),a._v(" "),e("li",[a._v("output() 添加输出文件")]),a._v(" "),e("li",[a._v("save() 执行保存")])]),a._v(" "),e("h2",{attrs:{id:"更多"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更多"}},[a._v("#")]),a._v(" 更多")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://ruanyifeng.com/blog/2020/01/ffmpeg.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("阮一峰 FFmpeg 视频处理入门教程"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://www.zhihu.com/question/484680728/answer/2764667058",target:"_blank",rel:"noopener noreferrer"}},[a._v("FFmpeg 开发笔记1"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://www.zhihu.com/question/300182407/answer/2305522546",target:"_blank",rel:"noopener noreferrer"}},[a._v("FFmpeg 开发笔记2"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/0voice/ffmpeg_develop_doc",target:"_blank",rel:"noopener noreferrer"}},[a._v("最新ffmpeg资料整理"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/457381792",target:"_blank",rel:"noopener noreferrer"}},[a._v("一次性搞懂dBSPL、dBm、dBu、dBV、dBFS的区别！"),e("OutboundLink")],1)])]),a._v(" "),e("blockquote",[e("p",[a._v("🕑 最后更新时间: 2022-11-27 17:58")])])])}),[],!1,null,null,null);e.default=r.exports}}]);